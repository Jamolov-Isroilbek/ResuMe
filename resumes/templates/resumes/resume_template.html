<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ resume.title }}</title>
    <link rel="stylesheet" href="http://localhost:8000{% static 'resumes/css/resume.css' %}">
</head>

<script>
    // Send height to parent frame
    window.addEventListener('load', () => {
      const height = document.documentElement.scrollHeight;
      window.parent.postMessage({
        type: 'resumeHeight',
        height: height
      }, 'http://localhost:3000');
    });
    </script>
<body>
    <header class="resume-header">
        <h1>{{ resume.personal_details.first_name }} {{ resume.personal_details.last_name }}</h1>
        <div class="contact-info">
            {% if resume.personal_details.website %}
            <div class="contact-item">
                <i class="fas fa-globe"></i>
                <a href="{{ resume.personal_details.website }}">{{ resume.personal_details.website }}</a>
            </div>
            {% endif %}
            
            <div class="contact-item">
                <i class="fas fa-envelope"></i>
                <a href="mailto:{{ resume.personal_details.email }}">{{ resume.personal_details.email }}</a>
            </div>
            
            <div class="contact-item">
                <i class="fas fa-phone"></i>
                {{ resume.personal_details.phone }}
            </div>
            
            {% if resume.personal_details.github %}
            <div class="contact-item">
                <i class="fab fa-github"></i>
                <a href="{{ resume.personal_details.github }}">{{ resume.personal_details.github }}</a>
            </div>
            {% endif %}
            
            {% if resume.personal_details.linkedin %}
            <div class="contact-item">
                <i class="fab fa-linkedin"></i>
                <a href="{{ resume.personal_details.linkedin }}">{{ resume.personal_details.linkedin }}</a>
            </div>
            {% endif %}
        </div>
    </header>

    <main class="resume-content">
        <!-- Education Section -->
        <section class="resume-section">
            <h2>Education</h2>
            {% for edu in resume.education.all %}
            <div class="section-entry">
                <div class="entry-header">
                    <h3>{{ edu.institution }}</h3>
                    <div class="entry-date">
                        {{ edu.start_date|date:"M Y" }} - {% if edu.end_date %}{{ edu.end_date|date:"M Y" }}{% else %}Present{% endif %}
                    </div>
                </div>
                <div class="entry-details">
                    <p class="major">{{ edu.major }}</p>
                    {% if edu.cgpa %}<p class="cgpa">CGPA: {{ edu.cgpa }}</p>{% endif %}
                </div>
            </div>
            {% endfor %}
        </section>

        <!-- Work Experience Section -->
        <section class="resume-section">
            <h2>Experience</h2>
            {% for work in resume.work_experience.all %}
            <div class="section-entry">
                <div class="entry-header">
                    <h3>{{ work.employer }}</h3>
                    <div class="entry-date">
                        {{ work.start_date|date:"M Y" }} - {% if work.end_date %}{{ work.end_date|date:"M Y" }}{% else %}Present{% endif %}
                    </div>
                </div>
                <div class="entry-details">
                    <p class="role">{{ work.role }}</p>
                    {% if work.location %}<p class="location">{{ work.location }}</p>{% endif %}
                    <div class="description">{{ work.description }}</div>
                </div>
            </div>
            {% endfor %}
        </section>

        <!-- Skills Section -->
        <section class="resume-section">
            <h2>Skills</h2>
            <div class="skills-container">
                {% regroup resume.skills.all by skill_type as skill_groups %}
                {% for group in skill_groups %}
                <div class="skill-group">
                    <h4>{{ group.grouper }}</h4>
                    <ul>
                        {% for skill in group.list %}
                        <li>{{ skill.skill_name }}</li>
                        {% endfor %}
                    </ul>
                </div>
                {% endfor %}
            </div>
        </section>

        <!-- Awards Section -->
        <section class="resume-section">
            <h2>Awards & Certificates</h2>
            {% for award in resume.awards.all %}
            <div class="section-entry">
                <div class="entry-header">
                    <h3>{{ award.name }}</h3>
                    <div class="entry-date">{{ award.year }}</div>
                </div>
                <div class="entry-details">
                    <p>{{ award.description }}</p>
                </div>
            </div>
            {% endfor %}
        </section>
    </main>

    <!-- Font Awesome for icons -->
    <script src="https://kit.fontawesome.com/your-kit-code.js" crossorigin="anonymous"></script>
</body>
</html>